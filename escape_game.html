<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Escape Game Difficile</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #111;
      color: #eee;
    }

    #accueil, #jeu {
      display: none;
      padding: 40px;
    }

    #accueil.active, #jeu.active {
      display: block;
    }

    .center {
      text-align: center;
      margin-top: 100px;
    }

    button {
      padding: 15px 30px;
      font-size: 18px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    .question {
      background: #222;
      padding: 15px;
      margin-bottom: 20px;
      border-left: 5px solid #4caf50;
      border-radius: 8px;
    }

    input[type="text"] {
      padding: 5px;
      border-radius: 5px;
      border: none;
      width: 200px;
    }

    .digit {
      font-size: 24px;
      font-weight: bold;
      margin-left: 15px;
      color: #4caf50;
    }

    #code {
      font-size: 30px;
      letter-spacing: 8px;
      margin-top: 30px;
      color: #4caf50;
    }
  </style>
</head>
<body>

<!-- Page d'accueil -->
<div id="accueil" class="active center">
  <h1>üß† Escape Game Difficile</h1>
  <p>Bienvenue dans ce d√©fi ! R√©sous 10 √©nigmes pour d√©couvrir un code secret.</p>
  <button onclick="commencerJeu()">Commencer</button>
</div>

<!-- Page du jeu -->
<div id="jeu">
  <h2>R√©sous les √©nigmes. Chaque bonne r√©ponse d√©voile un chiffre du code secret.</h2>
  <div id="questions"></div>
  <h2>üìû Code final :</h2>
  <div id="code">_ _ _ _ _ _ _ _ _ _</div>
</div>

<script>
  const enigmes = [
    { question: "1. Mon premier est un mois sans E, mon second est une note sans son, et mon tout est une illusion.", answer: "mirage", digit: "0" },
    { question: "2. Je suis le fruit d‚Äôun menteur qui dit toujours la v√©rit√©. Que suis-je ?", answer: "paradoxe", digit: "6" },
    { question: "3. Plus je suis grand, moins on me voit. Que suis-je ?", answer: "obscurit√©", digit: "5" },
    { question: "4. Je commence la nuit, je finis le matin et je ne dure qu‚Äôun instant.", answer: "r√™ve", digit: "2" },
    { question: "5. Je suis ce que tu prends sans jamais le voler, mais qui peut te rendre sourd.", answer: "photo", digit: "2" },
    { question: "6. Si tu m‚Äôas, tu veux me partager. Si tu me partages, tu ne m‚Äôas plus. Que suis-je ?", answer: "secret", digit: "6" },
    { question: "7. Je ne peux √™tre vu qu‚Äôen me fermant les yeux. Que suis-je ?", answer: "imagination", digit: "5" },
    { question: "8. Mon p√®re est le tonnerre, ma m√®re est la lumi√®re, je suis rapide comme l‚Äô√©clair.", answer: "foudre", digit: "7" },
    { question: "9. Je suis une erreur qu‚Äôon ne voit qu‚Äôune fois qu‚Äôelle est faite.", answer: "faute", digit: "0" },
    { question: "10. Je ne vis que quand tu me lis, je meurs quand tu m‚Äôoublies.", answer: "histoire", digit: "6" }
  ];

  const codeDigits = Array(10).fill("_");
  const codeDisplay = document.getElementById("code");
  const questionsDiv = document.getElementById("questions");

  // Ajout du bouton Suivant et de la lettre finale
  const btnSuivant = document.createElement("button");
  btnSuivant.innerText = "Suivant";
  btnSuivant.style.display = "none";
  btnSuivant.onclick = afficherLettre;
  btnSuivant.style.marginTop = "20px";
  btnSuivant.style.fontSize = "18px";
  btnSuivant.style.padding = "10px 20px";
  btnSuivant.style.backgroundColor = "#2196f3";
  btnSuivant.style.color = "white";
  btnSuivant.style.border = "none";
  btnSuivant.style.borderRadius = "10px";
  questionsDiv.parentElement.appendChild(btnSuivant);

  const lettreDiv = document.createElement("div");
  lettreDiv.id = "lettreFinale";
  lettreDiv.style.fontSize = "28px";
  lettreDiv.style.marginTop = "20px";
  lettreDiv.style.color = "#ffeb3b";
  lettreDiv.style.fontWeight = "bold";
  questionsDiv.parentElement.appendChild(lettreDiv);

  function updateCode() {
    codeDisplay.innerText = codeDigits.join(" ");
    if (!codeDigits.includes("_")) {
      btnSuivant.style.display = "inline-block";
    }
  }

  function commencerJeu() {
    document.getElementById("accueil").classList.remove("active");
    document.getElementById("jeu").classList.add("active");
    lancerEnigmes();
  }

  function lancerEnigmes() {
    enigmes.forEach((enigme, index) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `
        <p>${enigme.question}</p>
        <input type="text" id="input-${index}" />
        <button onclick="check(${index})">Valider</button>
        <span class="digit" id="digit-${index}">_</span>
      `;
      questionsDiv.appendChild(div);
    });
    updateCode();
  }

  function normalize(str) {
    return str.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
  }

  function check(index) {
    const input = document.getElementById(`input-${index}`).value;
    const guess = normalize(input);
    const answer = normalize(enigmes[index].answer);
    const display = document.getElementById(`digit-${index}`);

    if (guess === answer) {
      display.innerText = enigmes[index].digit;
      codeDigits[index] = enigmes[index].digit;
    } else {
      display.innerText = "‚ùå";
    }

    updateCode();
  }

  function afficherLettre() {
    lettreDiv.innerText = "Lettre : A";
    btnSuivant.style.display = "none"; // Optionnel : cacher le bouton apr√®s clic
  }
</script>
</body>
</html>
